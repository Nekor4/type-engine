var te=function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=21)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.colliderType=t}return t.prototype.onCollision=function(t){},t.prototype.update=function(){},t}();e.Collider=i;!function(t){t[t.Rect=0]="Rect",t[t.Circle=1]="Circle"}(e.ColliderType||(e.ColliderType={}))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(3)),i(n(14)),i(n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.duplicate=function(){return new t(this.x,this.y)},t.add=function(e,n){return new t(e.x+n.x,e.y+n.y)},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.dotProduct=function(t,e){return t.x*e.x+t.y*e.y},t.subtract=function(e,n){return new t(e.x-n.x,e.y-n.y)},t.prototype.subtract=function(t){"number"==typeof t?(this.x-=t,this.y-=t):(this.x-=t.x,this.y-=t.y)},t.prototype.multiply=function(t){this.x*=t,this.y*=t},t.getDistance=function(t,e){var n=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2);return n=Math.sqrt(n)},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.magSq=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(t){void 0===t&&(t=1);var e=Math.sqrt(this.x*this.x+this.y*this.y);return this.x/=e,this.y/=e,this},t.prototype.get=function(){return{x:this.x,y:this.y}},t.prototype.set=function(t,e){this.x=t,this.y=e},t}();e.Vector2=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=function(){function t(t,e){void 0===t&&(t=1280),void 0===e&&(e=720),this.inGameObjects=[],this.isPauzed=!0,this.createCanvas(t,e),console.log("Engine created!")}return t.prototype.createCanvas=function(e,n){this._canvas=document.createElement("canvas"),this._canvas.width=1280,this._canvas.height=720,this._canvas.style.border="1px solid",t.ctx=this._canvas.getContext("2d")},t.prototype.add=function(t){this.inGameObjects.push(t)},t.prototype.start=function(){console.log("Game starts!"),this.isPauzed=!1,this.startObjects(),this.gameLoop()},t.prototype.pauze=function(){console.log("Game paused!"),this.isPauzed=!0},Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),t.prototype.startObjects=function(){for(var t=0;t<this.inGameObjects.length;t++)this.inGameObjects[t]&&this.inGameObjects[t].componentsStart()},t.prototype.gameLoop=function(){var e=this;if(!this.isPauzed){requestAnimationFrame(function(){e.gameLoop()}),t.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),i.Collision.DetectCollistion(this.inGameObjects);for(var n=0;n<this.inGameObjects.length;n++)this.inGameObjects[n]&&this.inGameObjects[n].componentsUpdateLoop()}},t}();e.Engine=o},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(9)),i(n(0)),i(n(10)),i(n(11))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(12)),i(n(13))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t}();e.Renderer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(){this.type=r.Dynamic,this.collisionSolution=s.Displace,this.velocity=new i.Vector2,this.linearDrag=.5,this.mass=1,this.gravity=1}return t.prototype.update=function(){this.gameObject.position.add(this.velocity),this.velocity.y+=this.gravity},t.prototype.resolveRectToRectStaticCollision=function(t){var e=this.gameObject.collider,n=e.midX,i=e.midY,o=t.midX,r=t.midY,s=(o-n)/t.halfWidth,c=(r-i)/t.halfHeight;console.log(s,c);var a=Math.abs(s),u=Math.abs(c);Math.abs(a-u)<.1?(e.gameObject.position.x=s<0?t.rightX:t.leftX-e.dimension.x,e.gameObject.position.y=c<0?t.bottomY:t.topY-e.dimension.y,Math.random()<.5?(this.velocity.x=-this.velocity.x*t.restitution,Math.abs(this.velocity.x)<4e-4&&(this.velocity.x=0)):(this.velocity.y=-this.velocity.y*t.restitution,Math.abs(this.velocity.y)<4e-4&&(this.velocity.y=0))):a>u?(e.gameObject.position.x=s<0?t.rightX:t.leftX-e.dimension.x,this.velocity.x=-this.velocity.x*t.restitution,Math.abs(this.velocity.x)<4e-4&&(this.velocity.x=0)):(e.gameObject.position.y=c<0?t.bottomY:t.topY-e.dimension.y,this.velocity.y=-this.velocity.y*t.restitution,Math.abs(this.velocity.y)<4e-4&&(this.velocity.y=0))},t}();e.Body=o;var r;!function(t){t[t.Kinematic=0]="Kinematic",t[t.Dynamic=1]="Dynamic"}(r||(r={}));var s;!function(t){t[t.Displace=0]="Displace",t[t.Elastic=1]="Elastic"}(s||(s={}))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(1)),i(n(5)),i(n(15)),i(n(17)),i(n(4)),i(n(20))},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){function e(e){void 0===e&&(e=5);var n=t.call(this,o.ColliderType.Circle)||this;return n.radius=e,n}return i(e,t),e}(o.Collider);e.CircleCollider=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),r=function(){function t(){}return t.DetectCollistion=function(t){for(var e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++){var i=t[e].collider,o=t[n].collider;i&&o&&this.CollisionTest(i,o)&&(i.onCollision(o),o.onCollision(i))}},t.CollisionTest=function(t,e){var n=!1;switch(t.colliderType){case i.ColliderType.Circle:n=this.CircleCollisionTest(t,e);break;case i.ColliderType.Rect:n=this.RectCollisionTest(t,e)}return n},t.CircleCollisionTest=function(t,e){var n=!1;switch(e.colliderType){case i.ColliderType.Circle:n=this.CircleCircle(t,e);break;case i.ColliderType.Rect:}return n},t.RectCollisionTest=function(t,e){var n=!1;switch(e.colliderType){case i.ColliderType.Rect:n=this.RectangleRectangle(t,e)}return n},t.CircleCircle=function(t,e){return!!(t.gameObject.position&&e.gameObject.position&&o.Vector2.getDistance(t.gameObject.position,e.gameObject.position)<=t.radius+e.radius)},t.RectangleRectangle=function(t,e){var n=!1,i=!1;return t.gameObject.position.x<=e.gameObject.position.x?t.gameObject.position.x+t.dimension.x>=e.gameObject.position.x&&(n=!0):e.gameObject.position.x+e.dimension.x>=t.gameObject.position.x&&(n=!0),t.gameObject.position.y<=e.gameObject.position.y?t.gameObject.position.y+t.dimension.y>=e.gameObject.position.y&&(i=!0):e.gameObject.position.y+e.dimension.y>=t.gameObject.position.y&&(i=!0),!0===n&&!0===i},t}();e.Collision=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(0),s=n(5),c=function(t){function e(){var e=t.call(this,r.ColliderType.Rect)||this;return e.restitution=0,e}return i(e,t),e.prototype.awake=function(){if(this.gameObject.renderer instanceof s.SpriteRenderer){var t=this.gameObject.renderer;this.dimension=new o.Vector2(t.sprite.img.width,t.sprite.img.height)}},e.prototype.onCollision=function(t){t instanceof e&&this.gameObject.body&&this.gameObject.body.resolveRectToRectStaticCollision(t)},Object.defineProperty(e.prototype,"dimension",{get:function(){return this._dimension},set:function(t){this._dimension=t,this.halfWidth=.5*t.x,this.halfHeight=.5*t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midX",{get:function(){return this.halfWidth+this.gameObject.position.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midY",{get:function(){return this.halfHeight+this.gameObject.position.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightX",{get:function(){return this.gameObject.position.x+this.dimension.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftX",{get:function(){return this.gameObject.position.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topY",{get:function(){return this.gameObject.position.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomY",{get:function(){return this.gameObject.position.y+this.dimension.y},enumerable:!0,configurable:!0}),e}(r.Collider);e.RectCollider=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(6),s=function(t){function e(e){var n=t.call(this)||this;return n.sprite=e,n}return i(e,t),e.prototype.update=function(){this.sprite.isLoaded&&(o.Engine.ctx.save(),o.Engine.ctx.drawImage(this.sprite.img,this.gameObject.position.x,this.gameObject.position.y),o.Engine.ctx.stroke(),o.Engine.ctx.restore())},e}(r.Renderer);e.SpriteRenderer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.gridHeight=32,this.girdWidth=32}return t}();e.TileMapRenderer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(0),r=n(7),s=n(6),c=function(){function t(){this.position=new i.Vector2,this.components=[]}return t.prototype.addComponent=function(t){return t.gameObject=this,t.awake&&t.awake(),this.components.push(t),t.start&&t.start(),t instanceof o.Collider&&(this._collider=t),t instanceof r.Body&&(this._body=t),t instanceof s.Renderer&&(this._renderer=t),t},t.prototype.getComponent=function(t){for(var e=null,n=0,i=this.components;n<i.length;n++){var o=i[n];o instanceof t&&(e=o)}return e},t.prototype.getComponents=function(t){for(var e=[],n=0,i=this.components;n<i.length;n++){var o=i[n];o instanceof t&&e.push(o)}return e},t.prototype.componentsStart=function(){for(var t=0;t<this.components.length;t++){var e=this.components[t];e.start&&e.start()}},t.prototype.componentsUpdateLoop=function(){for(var t=0;t<this.components.length;t++){var e=this.components[t];e.update&&e.update()}},Object.defineProperty(t.prototype,"collider",{get:function(){return this._collider},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),t}();e.GameObject=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(16))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.update=function(){},t}();e.WorldGenerator=i},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(18)),i(n(19))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=this;this.isLoaded=!1,this.img=new Image,this.img.src=t,this.img.onload=function(){e.isLoaded=!0}}return t}();e.Sprite=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t}();e.Tile=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(7))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),o=new i.Engine;document.body.appendChild(o.canvas);var r=new i.Sprite("./assets/stone.png"),s=new i.GameObject,c=new i.GameObject,a=new i.GameObject,u=new i.GameObject,p=new i.GameObject;s.position.set(0,500),c.position.set(64,500),a.position.set(128,500),u.position.set(192,500),s.addComponent(new i.SpriteRenderer(r)),c.addComponent(new i.SpriteRenderer(r)),a.addComponent(new i.SpriteRenderer(r)),u.addComponent(new i.SpriteRenderer(r)),p.addComponent(new i.SpriteRenderer(r)),s.addComponent(new i.RectCollider),c.addComponent(new i.RectCollider),a.addComponent(new i.RectCollider),u.addComponent(new i.RectCollider),p.addComponent(new i.RectCollider);var l=new i.Body;p.addComponent(l),o.add(s),o.add(c),o.add(a),o.add(u),o.add(p),o.start(),document.addEventListener("keyup",function(t){"ArrowRight"===t.key?p.body.velocity.set(6,0):"ArrowUp"===t.key?p.body.velocity.set(0,-10):"ArrowLeft"===t.key&&p.body.velocity.set(-6,0)})}]);
//# sourceMappingURL=test.bundle.map